cd infra/aws

npm install

# probaly need to update the aws cli (cdk)
npm install -g aws-cdk@latest

npm run synth

cdk diff

# if fails
npx aws-cdk@latest synth


-----

npm run synth

npm run diff

cd infra/aws
npm run synth
npm run diff

===============

# fix conflict

# מהשורש של הפרויקט, החלף us-east-1 ב-region שלך אם צריך
chmod +x scripts/delete-ecr-repos.sh
./scripts/delete-ecr-repos.sh us-east-1

# for windows:
.\scripts\delete-ecr-repos.ps1 -Region us-east-1


# OR
aws ecr delete-repository --repository-name microservices-blog/client   --region us-east-1 --force
aws ecr delete-repository --repository-name microservices-blog/posts    --region us-east-1 --force
aws ecr delete-repository --repository-name microservices-blog/comments --region us-east-1 --force
aws ecr delete-repository --repository-name microservices-blog/query    --region us-east-1 --force
aws ecr delete-repository --repository-name microservices-blog/moderation --region us-east-1 --force
aws ecr delete-repository --repository-name microservices-blog/event-bus --region us-east-1 --force



  aws cloudformation describe-stack-events --stack-name MicroservicesBlogStack --region us-east-1 --query 'StackEvents[*].[Timestamp,ResourceStatus,ResourceType,LogicalResourceId]' --output table